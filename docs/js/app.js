(function(){function a(){startmenu.status_startmenu||(startmenu.status_startmenu=!0,startmenu.obj.area.className+=" startmenu--active")}function b(){startmenu.status_startmenu&&(startmenu.status_startmenu=!1,startmenu.obj.area.className=startmenu.obj.area.className.replace(" startmenu--active",""))}function c(){document.addEventListener("click",function(c){var e=c.target;d(".taskline__start",e)&&!startmenu.status_startmenu?a():!d(".startmenu",e)&&startmenu.status_startmenu&&b()}),startmenu.obj.programm_terminal.addEventListener("click",function(){b(),new program_terminal}),startmenu.obj.programm_explorer.addEventListener("click",function(){b(),new programm_explorer})}function d(a,b){for(var c=b.parentNode,a=document.querySelector(a);null!=c;){if(c==a)return!0;c=c.parentNode}return!1}this.startmenu={AUTHOR:"Philipp Heidrich"},startmenu.boot=function(){boot.printBootMessage("Load startmenu"),boot.printBootMessage("&#10142; load objects"),startmenu.obj={startmenu_btn:document.querySelector(".taskline__start"),area:document.querySelector(".startmenu"),programm_terminal:document.querySelector(".startmenu .js__onclickTerminal"),programm_explorer:document.querySelector(".startmenu .js__onclickExplorer")},boot.printBootMessage("<br>"),c()}}).call(this),function(){function a(){c(),d(),setInterval(function(){c(),d()},1e3)}function b(){var a=[{name:"January",short:"Jan"},{name:"February",short:"Feb"},{name:"March",short:"Mar"},{name:"April",short:"Apr"},{name:"May",short:"May"},{name:"June",short:"Jun"},{name:"July",short:"Jul"},{name:"August",short:"Aug"},{name:"September",short:"Sep"},{name:"October",short:"Oct"},{name:"November",short:"Nov"},{name:"December",short:"Dec"}],b=new Date,c={hour:b.getHours(),min:b.getMinutes(),day:b.getDate(),month:b.getMonth()+1,monthName:a[b.getMonth()+1].name,monthNameShort:a[b.getMonth()+1].short,year:b.getFullYear()};return c.min=c.min<10?"0"+c.min:c.min,c.hour=c.hour<10?"0"+c.hour:c.hour,c.date=c.date<10?"0"+c.date:c.date,c.month=c.month<10?"0"+c.month:c.month,c}function c(){var a=b();taskline.obj.time_date.innerHTML=a.day+"."+a.monthNameShort+" "+a.year}function d(){var a=b();taskline.obj.time_timeday.innerHTML=a.hour+":"+a.min}function e(a){var b=document.createElement("i");return b.className="material-icons",b.innerHTML=a,b}this.taskline={AUTHOR:"Philipp Heidrich"},taskline.boot=function(){boot.printBootMessage("Load taskline"),boot.printBootMessage("&#10142; load objects"),taskline.obj={time_timeday:document.querySelector(".taskline .taskline__timeday"),time_date:document.querySelector(".taskline .taskline__date"),program_open:document.querySelector(".taskline .taskline__programOpen")},boot.printBootMessage("&#10142; load time"),a(),boot.printBootMessage("<br>")},taskline.createTaskProgram=function(a){a.taskProgram=document.createElement("li"),a.taskProgram.program_id=a.id_counter,a.taskProgram.className="taskline__window",a.taskShow=document.createElement("div"),a.taskShow.className="taskline__showBlock",a.taskShow.onclick=function(b){program.disableClickEvent=!0,a.isMinimized?(taskline.reminizedWindow(a.id_counter),program.reminizedWindow(a.id_counter)):a.isSelected?(taskline.minimizeWindow(a.id_counter),program.minimizeWindow(a.id_counter)):(taskline.setSelection(a.id_counter),program.setSelection(a.id_counter))},a.taskProgram.appendChild(a.taskShow),a.taskName=document.createElement("div"),a.taskName.className="taskline__programTxt",a.taskName.innerHTML=a.title,a.taskShow.appendChild(a.taskName),a.taskMenu=document.createElement("div"),a.taskMenu.className="taskline__programMenu",a.taskProgram.appendChild(a.taskMenu),a.taskMenuClose=document.createElement("div"),a.taskMenuClose.className="taskline__programMenuBtn taskline__programMenuBtn--close",a.taskMenuClose.onclick=function(){program.disableClickEvent=!0,program.removeWindow(a.id_counter)},a.taskMenu.appendChild(a.taskMenuClose),a.taskMenuClose.appendChild(e("close")),taskline.obj.program_open.appendChild(a.taskProgram)},taskline.removeSelection=function(){if(program.selected){var a=program.list[program.selected];a.taskProgram.className=a.taskProgram.className.replace(" taskline__program--selected","")}},taskline.setSelection=function(a){if(program.list[a]&&a!==program.selected){var b=program.list[a];taskline.removeSelection(),b.taskProgram.className+=" taskline__program--selected"}},taskline.minimizeWindow=function(a){var b=program.list[a];taskline.removeSelection(),b.taskProgram.className+=" taskline__program--minimized"},taskline.reminizedWindow=function(a){var b=program.list[a];taskline.removeSelection(),b.taskProgram.className=b.taskProgram.className.replace(" taskline__program--minimized","")}}.call(this),function(){this.class_module={AUTHOR:"Philipp Heidrich"},class_module.changeModule=function(a){var b=document.querySelectorAll("#wrapper .content");class_module.changeModule_ctr?class_module.changeModule_ctr++:class_module.changeModule_ctr=9,a.className+=" content--show";for(var c=0;c<b.length;c++){var d=b[c];d.className.match("content--active")&&(d.className=d.className.replace(" content--active",""))}a.style.zIndex=class_module.changeModule_ctr,setTimeout(function(){a.className+=" content--active"},10)}}.call(this),function(){this.class_os={AUTHOR:"Philipp Heidrich"},class_os.saveFirstPcVisit=function(){return option.save("os_firstVisit",!0),!0},class_os.getFirstPcVisit=function(){return!option.load("os_firstVisit")||0==option.load("os_firstVisit")},class_os.savePcName=function(a){option.save("os_name",a)},class_os.getPcName=function(){return option.load("os_name")}}.call(this),function(){function a(a){"~"==a[0]&&(a=a.replace("~","/home/"+class_user.getCurrentUser())),"/"!==a[0]&&(a=class_storage.currentPath+a);var b=a.split("/");return""==b[0]&&b.shift(),b}function b(a){var b=class_storage.fs,c=!1;if(1==a.length&&""==a)c=!0;else{for(var d in a){var e=a[d];b[e]&&"dir"==b[e].type?(c=!0,b=b[e]):c=!1}b=b.dir}return!!c&&b}function c(a){var b=class_storage.fs,c=!1,d=a,e=d.pop();for(var f in d){var g=d[f];if(!b[g]||"dir"!=b[g].type)break;b=b[g],c=!0}return!!(c&&b.dir&&b.dir[e])&&b.dir[e]}function d(){class_storage.fs=option.load("storage_filesys")}function e(){option.save("storage_filesys",class_storage.fs)}this.class_storage={AUTHOR:"Philipp Heidrich"};var f="~";class_storage.boot=function(){boot.printBootMessage("Load storage"),boot.printBootMessage("&#10142; load filesystem"),d(),boot.printBootMessage("<br>")},class_storage.getCurrentPath=function(){return f},class_storage.getCurrentRealPath=function(){var a=f;return a=a.replace("~","/home/"+class_user.getCurrentUser())},class_storage.createDir=function(b){var b=a(b),c=b.pop(),d=class_storage.fs,f=!1;for(var g in b){var h=b[g];if(!d[h]||"dir"!=d[h].type){f=!1;break}f=!0,d=d[h]}return!(!f||d[c])&&(d[c]={type:"dir",dir:{}},e(),!0)},class_storage.createFile=function(c,d,f){var g=a(c),h=b(g);return!!h&&(h[d]={type:"file",content:f},e(),!0)},class_storage.appendContent=function(b,d){var f=a(b),g=c(f);return!!g&&(g.content+=d,e(),!0)},class_storage.showAll=function(c){var c=c?c:class_storage.getCurrentRealPath(),d=a(c),e=b(d);return e}}.call(this),function(){function a(a){var b=0;if(0==a.length)return b;for(i=0;i<a.length;i++)char=a.charCodeAt(i),b=(b<<5)-b+char,b&=b;return b}this.class_user={AUTHOR:"Philipp Heidrich"},class_user.createNewUser=function(b,c,d,e){if(b&&b.length&&e&&e.match(/[admin|user]/g)){var f={id:c,name:b,type:e,pwd:!1};d&&(f.pwd=a(d));var g=option.load("account_users");return g[c]=f,option.save("account_users",g),class_storage.createDir("/home/"+c),class_storage.createFile("/home/"+c,".bash_history",""),!0}},class_user.getAllUsers=function(){return option.load("account_users")},class_user.getUser=function(a){var b=option.load("account_users");return!!b[a]&&b[a]},class_user.getUserLength=function(){var a=option.load("account_users"),b=0;for(var c in a)b++;return b},class_user.getCurrentUser=function(){var a=option.load("account_currentUser");return a},class_user.saveCurrentUser=function(a){option.save("account_currentUser",a)},class_user.comparePwd=function(b,c){var d=a(b);return d==c},class_user.setLoginUser=function(a){option.save("account_login",a)},class_user.removeLoginUser=function(){option.save("account_login",!1)}}.call(this),function(){this.boot={AUTHOR:"Philipp Heidrich"};var a=500,b=150;boot.init=function(){boot.loadHTML(),boot.loader([register.boot,login.boot,desktop.boot,class_storage.boot,taskline.boot,startmenu.boot,program.boot],function(){class_os.getFirstPcVisit()?setTimeout(register.init,a):setTimeout(login.init,a)})},boot.loadHTML=function(){boot.obj={content:document.querySelector("#wrapper .boot"),scroller:document.querySelector(".boot .boot__scroller")}},boot.loader=function(a,c){setTimeout(function(){if(a.length){var b=a.shift();b&&b(),boot.loader(a,c)}else c()},b)},boot.printBootMessage=function(a){var b=document.createElement("li");b.innerHTML=a,boot.obj.scroller.appendChild(b)},window.addEventListener("load",function(){boot.init()})}.call(this),function(){this.desktop={AUTHOR:"Philipp Heidrich"},desktop.init=function(){desktop.init_showScreen()},desktop.init_showScreen=function(){class_module.changeModule(desktop.obj.content)},desktop.boot=function(){boot.printBootMessage("Load desktop"),boot.printBootMessage("&#10142; load objects"),desktop.obj={wrapper:document.querySelector("#wrapper"),content:document.querySelector(".desktop"),program:document.querySelector(".desktop .desktop__programs")},boot.printBootMessage("<br>")}}.call(this),function(){function a(){var a=class_user.getCurrentUser();if(a){var c=login.obj.showbox_password_input.value,d=class_user.getUser(a).pwd;class_user.comparePwd(c,d)&&b()}}function b(){class_user.saveCurrentUser(login.currentUser.id),class_user.setLoginUser(login.currentUser.id),desktop.init()}function c(){f(),class_user.saveCurrentUser(!1)}function d(){var a=class_user.getAllUsers(),b=[];login.obj.noUser_loginList.innerHTML="";for(_user in a){var c=a[_user],d=document.createElement("li");d.userId=c.id,d.className="login__chooseUser";var f=document.createElement("h4");f.className="login__chooseUserName",f.innerHTML=c.name,d.appendChild(f);var h=document.createElement("h6");if(h.className="login__chooseUserId",h.innerHTML=c.id,d.appendChild(h),"admin"==c.type){var i=document.createElement("div");i.className="login__chooseUserType",i.innerHTML=c.type,d.appendChild(i)}login.obj.noUser_loginList.appendChild(d),b.push(d),d.addEventListener("click",function(){class_user.saveCurrentUser(this.userId),e(this.userId),g()})}var j=200;for(_obj in b)(function(a){var b=this;setTimeout(function(){b.className+=" login__chooseUser--active"},a)}).call(b[_obj],j),j+=100}function e(a){var b=class_user.getAllUsers();login.currentUser=b[a],login.obj.show_name.innerHTML=login.currentUser.name,login.obj.showbox_password.className=login.obj.showbox_password.className.replace(" login__area--active",""),login.obj.showbox_button.className=login.obj.showbox_button.className.replace(" login__area--active",""),login.currentUser.pwd?(login.obj.showbox_password.className+=" login__area--active",login.obj.showbox_password_input.select()):login.obj.showbox_button.className+=" login__area--active",login.obj.loginbox_noAccount.className=login.obj.loginbox_noAccount.className.replace(" login__box--active",""),login.obj.loginbox_withAccount.className+=" login__box--active"}function f(){login.obj.loginbox_withAccount.className=login.obj.loginbox_withAccount.className.replace(" login__box--active",""),login.obj.loginbox_noAccount.className+=" login__box--active",d()}function g(){class_user.getUserLength()>1?login.obj.showbox_changeUser.className+=" login__changeUser--active":login.obj.showbox_changeUser.className=login.obj.showbox_changeUser.className.replace(" login__changeUser--active","")}this.login={AUTHOR:"Philipp Heidrich"},login.init=function(){login.init_showScreen(),login.init_showContent(),login.init_addEvents()},login.init_showScreen=function(){class_module.changeModule(login.obj.content)},login.init_showContent=function(){var a=class_user.getCurrentUser();a?(e(a),g()):f()},login.init_addEvents=function(){login.obj.showbox_password_input.addEventListener("keyup",function(b){a()}),login.obj.showbox_button.addEventListener("click",function(){b()}),login.obj.showbox_changeUserBtn.addEventListener("click",function(){c()})},login.boot=function(){boot.printBootMessage("Load login..."),boot.printBootMessage("&#10142; load objects"),login.obj={wrapper:document.querySelector("#wrapper"),content:document.querySelector(".login"),show_name:document.querySelector(".login .js__showName"),loginbox_withAccount:document.querySelector(".login .login__box.login__box--withUser"),loginbox_noAccount:document.querySelector(".login .login__box.login__box--noUser"),showbox_password:document.querySelector(".login .login__area--password"),showbox_password_input:document.querySelector(".login .login__inputField"),showbox_button:document.querySelector(".login .login__area--button"),showbox_changeUser:document.querySelector(".login .login__changeUser"),showbox_changeUserBtn:document.querySelector(".login .login__changUserBtn"),noUser_loginList:document.querySelector(".login .login__chooseUserList")},boot.printBootMessage("&#10142; load user"),class_user.removeLoginUser(),boot.printBootMessage("<br>")}}.call(this),function(){function a(){class_module.changeModule(register.obj.content)}function b(){register.obj.form.addEventListener("submit",function(a){return a.preventDefault(),!1}),register.obj.button_fin.addEventListener("click",function(a){d()&&e()&&f()})}function c(a){return a=a.replace(/ /gi,"."),a=a.replace(/[^a-zA-Z0-9\.]/g,""),a=a.toLowerCase()}function d(){var a=register.obj.input_name.value,b=register.obj.input_pwd.value,d=c(register.obj.input_name.value);if((register.obj.input_pwd.value||register.obj.input_pwdRepeat.value)&&register.obj.input_pwd.value!==register.obj.input_pwdRepeat.value)return new msg.init({content:{txt:"Not the same passwords"}}),!1;var e=class_user.createNewUser(a,d,b,"admin");return e?(class_user.saveCurrentUser(d),!0):(new msg.init({content:{txt:"Please fill all fields"}}),!1)}function e(){var a=c(register.obj.input_pcName.value);return class_os.saveFirstPcVisit(),class_os.savePcName(a),!0}function f(){login.init()}this.register={AUTHOR:"Philipp Heidrich"},register.init=function(){a(),b()},register.boot=function(){boot.printBootMessage("Load register"),boot.printBootMessage("&#10142; load objects"),register.obj={wrapper:document.querySelector("#wrapper"),content:document.querySelector(".register"),form:document.querySelector(".register .register__form"),input_name:document.querySelector(".register .js__inputName"),input_pcName:document.querySelector(".register .js__inputPcname"),input_pwd:document.querySelector(".register .js__inputPwd"),input_pwdRepeat:document.querySelector(".register .js__inputPwdRepeat"),button_fin:document.querySelector(".register .js__registerFin")},boot.printBootMessage("<br>")}}.call(this);var programm_explorer=function(a){var b={AUTHOR:"Philipp Heidrich",VERSION:1,pressedKeys:[]};b.progObj=program.startWindow("explorer","Explorer"),b.obj={}};(function(){function a(a){var b=document.querySelector('#programs [program="'+a.id_program+'"]');a.layer=document.createElement("div"),a.layer.program_id=a.id_counter,a.layer.setAttribute("data-program-id",a.id_counter),a.layer.className="window",a.resizeArea=document.createElement("div"),a.resizeArea.className="window__resizeArea",a.layer.appendChild(a.resizeArea),f("top",a),f("right",a),f("bottom",a),f("left",a),f("rightTop",a),f("rightBottom",a),f("leftBottom",a),f("leftTop",a),a.header=document.createElement("div"),a.header.className="window__header",a.layer.appendChild(a.header),a.headerMove=document.createElement("div"),a.headerMove.className="window__move",a.headerMove.onmousedown=function(b){program.disableClickEvent=!0,g(b,a.id_counter)},a.headerMove.ondblclick=function(){program.disableClickEvent=!0,a.isMaximize?program.reduceWindow(a.id_counter):program.maximizeWindow(a.id_counter)},a.header.appendChild(a.headerMove),a.headerTitle=document.createElement("div"),a.headerTitle.className="window__title",a.headerTitle.innerHTML=a.title,a.header.appendChild(a.headerTitle),a.headerRight=document.createElement("div"),a.headerRight.className="window__headerRight",a.header.appendChild(a.headerRight),a.headerMinimize=document.createElement("div"),a.headerMinimize.className="window__headerBtn window__headerBtn--mini",a.headerMinimize.onclick=function(){program.disableClickEvent=!0,taskline.minimizeWindow(a.id_counter),program.minimizeWindow(a.id_counter)},a.headerRight.appendChild(a.headerMinimize),a.headerMinimize.appendChild(e("remove")),a.headerMaxMinimize=document.createElement("div"),a.headerMaxMinimize.className="window__headerBtn window__headerBtn--maxminmize",a.headerMaxMinimize.onclick=function(){program.disableClickEvent=!0,a.isMaximize?program.reduceWindow(a.id_counter):program.maximizeWindow(a.id_counter)},a.headerRight.appendChild(a.headerMaxMinimize),a.headerMaxMinimize.appendChild(e("crop_5_4")),a.headerClose=document.createElement("div"),a.headerClose.className="window__headerBtn window__headerBtn--close",a.headerClose.onclick=function(){program.disableClickEvent=!0,program.removeWindow(a.id_counter)},a.headerRight.appendChild(a.headerClose),a.headerClose.appendChild(e("close")),a.content=b.cloneNode(!0),a.content.className="window__content "+a.id_program,a.layer.appendChild(a.content)}function b(){document.addEventListener("click",function(a){if(program.disableClickEvent)program.disableClickEvent=!1;else{var b=c(".window",a.target,!0);b&&b.program_id===program.list||(program.removeSelection(),taskline.removeSelection()),b&&b.program_id&&program.setSelection(b.program_id)}}),window.addEventListener("mousemove",function(a){h(a),k(a)}),window.addEventListener("mouseup",function(a){i(a),l(a)})}function c(a,b,c){function d(a,b){for(var c=0;c<b.length;c++)if(b[c]==a)return a;return!1}for(var e=b.parentNode,f="string"==typeof a?document.querySelectorAll(a):a;null!=e;){var g=d(e,f);if(g)return!c||g;e=e.parentNode}return!1}function d(a,b,c){var d=25;a.style.left=b+d+"px",a.style.top=c+d+"px"}function e(a,b){var c=document.createElement("i");return c.className="material-icons",c.innerHTML=a,b&&(c.className+=" "+b),c}function f(a,b){var c="changeSize_"+a;b[c]=document.createElement("div"),b[c].className="window__changeSize",b[c].setAttribute("data-position",a),b[c].onmousedown=function(c){program.disableClickEvent=!0,j(c,b.id_counter,a)},b.resizeArea.appendChild(b[c])}function g(a,b){var c=program.list[b];c.isMovment||c.isMaximize||(program.setSelection(b),program.isMovment=b,c.isMovment=!0,c.moveStartClient={x:a.clientX,y:a.clientY},c.moveStartObj={x:c.layer.offsetLeft,y:c.layer.offsetTop,w:c.layer.offsetWidth,h:c.layer.offsetHeight})}function h(a){var b=program.isMovment;if(b&&program.list[b]&&program.list[b].isMovment){var c=program.list[b],d=(c.moveStart,a.clientX-c.moveStartClient.x),e=a.clientY-c.moveStartClient.y,f=c.moveStartObj.x,g=c.moveStartObj.y,h=f+d,i=g+e,j=c.moveStartObj.w,k=c.moveStartObj.h;h<0?m(0,null,c.layer):window.innerWidth<h+j?m(window.innerWidth-j,null,c.layer):m(c.moveStartObj.x+d,null,c.layer),i<0?m(null,0,c.layer):window.innerHeight<i+k?m(null,window.innerHeight-k,c.layer):m(null,c.moveStartObj.y+e,c.layer)}}function i(a){var b=program.isMovment;if(b&&program.list[b]&&program.list[b].isMovment){var c=program.list[b];c.isMovment=!1,program.isMovment=!1}}function j(a,b,c){var d=program.list[b];d.isResize||d.isMaximize||(program.setSelection(b),program.isResize=b,d.isResize=!0,d.resizeType=c,d.moveStart={x:a.clientX,y:a.clientY,w:d.layer.offsetWidth,h:d.layer.offsetHeight})}function k(a){var b=program.isResize;if(b&&program.list[b]&&program.list[b].isResize){var c=program.list[b],d=c.resizeType,e=a.clientX-c.moveStart.x,f=a.clientY-c.moveStart.y,g=c.moveStart.x,h=c.moveStart.y,i=c.moveStart.w,j=c.moveStart.h,k=g+e+i-e-(g+e),l=h+f+j-f-(h+f);switch(d){case"top":m(null,h+f,c.layer),n(null,j-f,c.layer);break;case"rightTop":n(i+e,null,c.layer),l>100&&(m(null,h+f,c.layer),n(null,j-f,c.layer));break;case"left":m(g+e,null,c.layer),n(i-e,null,c.layer);break;case"rightBottom":n(i+e,null,c.layer),l>100&&n(null,j+f,c.layer);break;case"right":n(i+e,null,c.layer);break;case"leftBottom":n(null,j+f,c.layer),k>180&&(m(g+e,null,c.layer),n(i-e,null,c.layer));break;case"bottom":n(null,j+f,c.layer);break;case"leftTop":k>180&&(m(g+e,null,c.layer),n(i-e,null,c.layer)),l>100&&(m(null,h+f,c.layer),n(null,j-f,c.layer))}if(c.pushResizeArray)for(var o=0;o<c.pushResizeArray.length;o++)c.pushResizeArray[o]()}}function l(a){var b=program.isResize;if(b&&program.list[b]&&program.list[b].isResize){var c=program.list[b];program.isResize=!1,c.isResize=!1}}function m(a,b,c){null!==a&&(c.style.left=a+"px"),null!==b&&(c.style.top=b+"px")}function n(a,b,c){null!==a&&a>180&&(c.style.width=a+"px"),null!==b&&b>100&&(c.style.height=b+"px")}this.program={AUTHOR:"Philipp Heidrich"},program.list={},program.selected=!1,program.counter=10,program.idCounter=0,program.boot=function(){boot.printBootMessage("Load program"),boot.printBootMessage("&#10142; load objects"),program.obj={programArea:document.querySelectorAll(".desktop__programs")},boot.printBootMessage("<br>"),b()},program.startWindow=function(b,c,e){var f={};if(program.idCounter++,f.id_counter=program.idCounter,f.id_program=b,f.title=c,a(f),taskline.createTaskProgram(f),program.selected){var g=program.list[program.selected],h=g.layer.offsetLeft,i=g.layer.offsetTop;d(f.layer,h,i)}else if(program.idCounter-1&&program.list[program.idCounter-1]&&!program.list[program.idCounter-1].minimized){var g=program.list[program.idCounter-1],h=g.layer.offsetLeft,i=g.layer.offsetTop;d(f.layer,h,i)}return program.disableClickEvent=!0,program.list[f.id_counter]=f,desktop.obj.program.appendChild(f.layer),program.counter++,f.layer.style.zIndex=program.counter,program.setSelection(f.id_counter),e&&program.maximizeWindow(program.idCounter),f},program.getSelectedWindow=function(){return!!program.selected&&program.list[program.selected]},program.removeWindow=function(a){var b=program.list[a].layer,c=program.list[a].taskProgram;program.selected==a&&(program.selected=!1),b.className+=" window--close",c.parentNode.removeChild(c),setTimeout(function(){b.parentNode.removeChild(b)},500),delete program.list[a]},program.minimizeWindow=function(a){var b=program.list[a],c=b.layer;b.isMinimized=!0,program.removeSelection(),c.className+=" window--minimized",setTimeout(function(){c.style.display="none"},500)},program.reminizedWindow=function(a){var b=program.list[a],c=b.layer;b.isMinimized=!1,program.setSelection(a),c.className=c.className.replace(" window--minimized"," window--reminimized"),c.style.display="block",setTimeout(function(){c.className=c.className.replace(" window--reminimized","")},550)},program.removeSelection=function(){if(program.selected){var a=program.list[program.selected],b=a.layer,c=a.taskProgram;a.isSelected=!1,b.className=b.className.replace(" window--selected",""),c.className=c.className.replace(" taskline__window--selected",""),program.selected=!1}},program.setSelection=function(a){if(program.list[a]&&a!==program.selected){var b=program.list[a],c=b.layer,d=b.taskProgram;program.removeSelection(),b.isSelected=!0,program.counter++,c.style.zIndex=program.counter,c.className+=" window--selected",d.className+=" taskline__window--selected",program.selected=a}},program.maximizeWindow=function(a){var b=program.list[a];if(!b.isMaximize&&(b.isMaximize=!0,b.windowsSize={x:b.layer.offsetWidth,y:b.layer.offsetHeight},b.windowPos={x:b.layer.offsetLeft,y:b.layer.offsetTop},b.layer.className+=" window--maximize",b.pushMaximizedArray))for(var c=0;c<b.pushMaximizedArray.length;c++)b.pushMaximizedArray[c]()},program.reduceWindow=function(a){var b=program.list[a],c=b.windowsSize,d=b.windowPos;if(b.isMaximize&&(b.isMaximize=!1,b.layer.className=b.layer.className.replace(" window--maximize",""),d&&(b.layer.style.left=d.x,b.layer.style.top=d.y),c&&(b.layer.style.width=d.x,b.layer.style.height=d.y),b.pushReduceArray))for(var e=0;e<b.pushReduceArray.length;e++)b.pushReduceArray[e]()},program.pushResizeFunction=function(a,b){var c=program.list[a];c.pushResizeArray||(c.pushResizeArray=[]),c.pushResizeArray.push(b)},program.pushMaximizedFunction=function(a,b){var c=program.list[a];c.pushMaximizedArray||(c.pushMaximizedArray=[]),c.pushMaximizedArray.push(b)},program.pushReduceFunction=function(a,b){var c=program.list[a];c.pushReduceArray||(c.pushReduceArray=[]),c.pushReduceArray.push(b)}}).call(this);var program_terminal_exit=function(a,b){var c=a.progObj.id_counter;program.removeWindow(c)},program_terminal=function(a){function b(){u.progObj.content.addEventListener("click",function(){e()}),u.obj.input.addEventListener("keydown",function(a){f(a)}),u.obj.input.addEventListener("keyup",function(a){g(a)}),program.pushResizeFunction(u.progObj.id_counter,function(){n()}),program.pushMaximizedFunction(u.progObj.id_counter,function(){n()}),program.pushReduceFunction(u.progObj.id_counter,function(){n()})}function c(){u.obj.inputField.insertBefore(k(),u.obj.inputArea)}function d(){var a="webOS terminal - v."+u.VERSION+'<br>using username "'+class_user.getCurrentUser()+'"<br><br>This terminal program is an alpha version. All available commands can you see with "help"';i(a)}function e(){var a=u.obj.input,b=r();a.focus(),s(b)}function f(a){var b=a.keyCode;u.pressedKeys[b]=!0,13==b&&(h(),a.preventDefault()),u.pressedKeys[17]&&76==b&&(o(),a.preventDefault()),u.pressedKeys[17]&&85==b&&(p(),a.preventDefault()),9==b&&(q(),a.preventDefault())}function g(a){var b=a.keyCode;u.pressedKeys[b]&&(u.pressedKeys[b]=!1)}function h(){var a=(u.obj.input,r()),b=m(a);if(j(),i(a,!0),b.app){var c=l(b);if(c){if(c.echo)i(c.echo);else if(c.run){var d=new c.run(u,b.params);d.print&&i(d.print)}}else i("No application &raquo;"+a+"&laquo; found")}p(),n()}function i(a,b){if(a||""!==a){var c=u.obj.history;a=t(a);var d=document.createElement("li");if(d.className="terminal__historyLi",c.appendChild(d),b){var e=document.createElement("div");e.className="terminal__icon",e.innerHTML="$",d.appendChild(e);var f=document.createElement("div");f.className="terminal__value",f.innerHTML=a,d.appendChild(f)}else d.innerHTML=a}}function j(){var a=u.obj.history,b=document.createElement("li");b.className="terminal__historyLi terminal__historyLi--newblock",b.appendChild(k()),a.appendChild(b)}function k(){var a=class_user.getCurrentUser(),b=class_os.getPcName(),c=document.createElement("div");c.className="terminal__ownerArea";var d=document.createElement("div");d.className="terminal__user",d.innerHTML=a+"@"+b,c.appendChild(d);var e=document.createElement("div");return e.className="terminal__path",e.innerHTML=class_storage.getCurrentPath(),c.appendChild(e),c}function l(a){var b={help:{echo:"ls[BR]exit"},ls:{run:program_terminal_ls},exit:{run:program_terminal_exit}};return!!b[a.app]&&b[a.app]}function m(a){var b=a.split(/ /g),c={app:b.shift()};for(var d in b)"-"==b[d][0]&&(b[d]=b[d].replace("-",""),c.params=b[d].split(""));return c}function n(){var a=u.obj.terminal,b=a.scrollHeight;a.scrollTop=b}function o(){u.obj.history.innerHTML=""}function p(){s("")}function q(){var a=class_storage.showAll(),b=r(),c=b.split(/ /g),d=[];if(c.length&&c[c.length-1]){var e=c.pop();for(var f in a){var g=new RegExp("^("+e+")","i");f.match(g)&&d.push(f)}if(d.length){if(d.length>1){for(var h=!1,k="",l=0,m=0;m<500;m++){var o=!1,p=!0;for(var q in d)if(o){if(!d[q][m]||d[q][m]!=o){p=!1;break}}else o=d[q][m];if(!p)break;k+=o,l++}if(l&&l>e.length){var g=new RegExp(e+"$","i");s(b.replace(g,k))}else{j();for(var t in d)0==t?h=d[t]:h+=" "+d[t];i(h)}}else{var g=new RegExp(e+"$","i");s(b.replace(g,d[0]+""))}n()}}}function r(){return u.obj.input.value}function s(a){u.obj.input.value=a}function t(a){return a=a.replace(/\[BR\]/g,"<br>")}var u={AUTHOR:"Philipp Heidrich",VERSION:2,pressedKeys:[]};u.progObj=program.startWindow("terminal","Terminal",a),u.obj={terminal:u.progObj.content,ownerArea:u.progObj.content.querySelector(".terminal__ownerArea"),inputArea:u.progObj.content.querySelector(".terminal__inputArea"),inputField:u.progObj.content.querySelector(".terminal__inputField"),input:u.progObj.content.querySelector(".terminal__input"),history:u.progObj.content.querySelector(".terminal__history"),user:u.progObj.content.querySelector(".terminal__user"),placeholder:u.progObj.content.querySelector(".terminal__placeholder")},b(),d(),c(),e()},program_terminal_ls=function(a,b){var c=!1,d=class_storage.showAll();for(var e in d)c?c+="[BR]"+e:c=e;return{print:c}};(function(){this.dynbox={AUTHOR:"Philipp Heidrich",VERSION:2},dynbox.init=function(a){this.dynObj_obj=a,dynbox.createElm(this),dynbox.addEvent(this)},dynbox.createElm=function(a){a.dynObj_obj.setAttribute("spellcheck","false"),a.dynObj_obj.setAttribute("autocomplete","off"),a.dynObj_obj.setAttribute("autocorrect","off"),a.dynObj_obj.setAttribute("autocapitalize","off"),a.dynObj_obj.style.overflowY="hidden",a.dynObj_pointer=document.createElement("div"),a.dynObj_pointer.className="dynbox__pointer",a.dynObj_pointer.style.top=0,a.dynObj_pointer.style.left=0,a.dynObj_pointer.style.opacity=0,a.dynObj_pointer.style.zIndex=0,a.dynObj_pointer.style.position="absolute",a.dynObj_obj.parentNode.appendChild(a.dynObj_pointer)},dynbox.checkBoxLength=function(a){var b=a.dynObj_obj.value;b=b.replace(/\n/g,"<br>"),a.dynObj_pointer.innerHTML=b;var c=a.dynObj_pointer.offsetHeight;a.dynObj_obj.style.minHeight=c+30+"px"},dynbox.addEvent=function(a){a.dynObj_obj.addEventListener("keyup",function(){dynbox.checkBoxLength(a)})}}).call(this),function(){function a(a){13==a.keyCode&&(msg.close(),a.preventDefault(),c())}function b(){window.addEventListener("keypress",a)}function c(){window.removeEventListener("keypress",a,!1)}this.msg={AUTHOR:"Philipp Heidrich",VERSION:2};var d={content:{append:"body"},button:[{title:"OK"}]};msg.init=function(a){this.option=msg.mergeOptions(a,d),this.html=msg.buildLayer(this),msg.buildContent(this),msg.buildButtons(this),msg.printMsg(this),b()},msg.mergeOptions=function(a,b){for(var c in b)void 0===a&&(a=b),"object"==typeof b[c]?a[c]=msg.mergeOptions(a[c],b[c]):"string"!=typeof b[c]&&"number"!=typeof b[c]||a[c]||(a[c]=b[c]);return a},msg.buildLayer=function(a){var b={},c=a.option;return document.querySelectorAll(".msg").length?(b.layer=document.querySelector(".msg"),b.out=b.layer.querySelector(".msg__out")):(b.layer=document.createElement("div"),b.layer.className="msg",b.out=document.createElement("div"),b.out.className="msg__out",c.abort?b.out.onclick=c.abort:b.out.onclick=function(){msg.close()},b.layer.appendChild(b.out)),b.content=document.createElement("div"),c.content.type?b.content.className="msg__content msg__content--"+c.content.type:b.content.className="msg__content",b.content.msg=a,b.layer.appendChild(b.content),b.contentInner=document.createElement("div"),b.contentInner.className="msg__innerContent",b.content.appendChild(b.contentInner),b.footer=document.createElement("div"),b.footer.className="msg__footer",b.content.appendChild(b.footer),b},msg.buildContent=function(a){var b=a.option.content,c=a.html;if(b.img){var d=document.createElement("img");d.className="msg__img",d.src=b.img,c.content.appendChild(d),c.contentInner.className+=" msg__innerContent--widthImg"}if(b.googleIcons){var e=document.createElement("div");e.className="msg__googleIcon",c.content.appendChild(e);var f=document.createElement("i");f.className="material-icons",f.innerHTML=b.googleIcons,e.appendChild(f),c.contentInner.className+=" msg__innerContent--widthImg"}if(b.header){var g=document.createElement("h3");g.className="msg__heading",g.innerHTML=b.header,c.contentInner.appendChild(g)}if(b.txt){var h=document.createElement("p");h.innerHTML=b.txt,c.contentInner.appendChild(h)}if(b.include&&document.querySelector(b.include)){var i=document.querySelector(b.include).cloneNode(!0);c.contentInner.appendChild(i);
}},msg.buildButtons=function(a){var b=a.option.button,c=a.html;if(b&&b.length){for(var d=0;d<b.length;d++){var e=b[d],f=document.createElement("div");f.innerHTML=e.title,f.className="msg__btn",e.click?f.onclick=e.click:f.onclick=function(){msg.close(a)},e.float&&(f.className+=" msg__btn--"+e.float),e.type&&(f.className+=" msg__btn--"+e.type),c.footer.appendChild(f)}var g=document.createElement("div");g.className="clear",c.footer.appendChild(g)}},msg.close=function(a,b){var c=a?a.html:!!document.querySelector(".msg .msg__content--focus")&&document.querySelector(".msg .msg__content--focus").msg.html,d=document.querySelectorAll(".msg .msg__content--start");c&&(1==d.length&&(c.out.className+=" msg__out--close"),c.content.className+=" msg__content--close",function(a){var c=a;setTimeout(function(){var a=document.querySelectorAll(".msg .msg__content--start");1==a.length?c.layer.parentNode.removeChild(c.layer):(c.content.parentNode.removeChild(c.content),a[a.length-2]&&(a[a.length-2].className+=" msg__content--focus")),b&&b()},500)}.call(this,c))},msg.printMsg=function(a){for(var b=a.option.content,c=a.html,d=document.querySelectorAll(".msg .msg__content"),e=0;e<d.length;e++)d[e].className.match("msg__content--focus")&&(d[e].className=d[e].className.replace(/ msg__content--focus/,""));document.querySelector(b.append).appendChild(c.layer),setTimeout(function(){d.length||(c.out.className+=" msg__out--start"),c.content.className+=" msg__content--start msg__content--focus",a.option.callback&&a.option.callback(a)},100)}}(this),window.addEventListener("load",function(){}),function(){this.option={AUTHOR:"Philipp Heidrich"},option.globalParam="wos",option.getDefault=function(a){var b=null;switch(a){case option.globalParam+"_account_status":b="pwd";break;case option.globalParam+"_account_users":b={};break;case option.globalParam+"_storage_filesys":b={home:{type:"dir",dir:{admin:{type:"dir"}}},var:{type:"dir"}}}return b},option.load=function(a){var b=null,c=option.globalParam+"_"+a,d=localStorage.getItem(c);if(d)d=JSON.parse(d);else{var b=option.getDefault(c);null!==b&&(option.save(a,b),d=b)}return d},option.save=function(a,b){try{var c=JSON.stringify(b)}catch(b){var c=option.getDefault(a)}localStorage.setItem(option.globalParam+"_"+a,c)},option.insert=function(a,b){var c=option.load(a);if(Array.isArray(c))Array.isArray(b)?c.concat(b):c.push(b);else if("object"==typeof c)for(var d in b)c[d]=b[d];else"string"==typeof c&&(c+=b);return option.save(a,c),c},option.export=function(){return JSON.stringify(localStorage)},option.import=function(a){var b=JSON.parse(a);for(var c in b)c.match(a.globalParam)&&localStorage.setItem(c,b[c])}}.call(this);